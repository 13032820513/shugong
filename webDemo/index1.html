<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>成都职工大数据中心</title>
    <!--共用部分css-->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/home.css">
    <link href="css/css.css" rel="stylesheet" type="text/css">
    <link href="css/common.css" rel="stylesheet" type="text/css">
    <link href="css/addone.css" rel="stylesheet" type="text/css">
    <link href="css/number.css" rel="stylesheet" type="text/css">
    <!--共用部分js-->
    <script src="js/jquery-3.0.0.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/layui/layui.js" type="text/javascript"></script>
    <script src="js/data.js" type="text/javascript"></script>

</head>
<body>
<!--进度条
    tabindex:控制tab键的顺序
    role：给障碍人士提供的一种屏幕阅读的功能，使用该属性是为了告诉屏幕阅读器该标签是什么，dialog表示对话框
    aria-labelledby：指定该标签被点击时，屏幕阅读器阅读的位置
    aria-hidden="true"：屏幕阅读器忽略阅读
-->
<div class="loading"  id="loading" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: block;position: absolute">
    <div style="position: absolute;margin: auto;left:0;right: 0;margin-top: 20%; width: 686px;">
        <div style="background: url('image/loading/waimian.png') center no-repeat; height: 71px;width: 686px; text-align: left;overflow: hidden;">
            <div style="width:182px; position: absolute;overflow: hidden;">
                <img src="image/loading/jiao2.png"style=""/>
            </div>
            <div style="background: url('image/loading/limian2.png') left no-repeat; height: 71px; margin-left:-100%;" id="loading_per"></div>
        </div>
        <div style="background: url('image/loading/number.png') left no-repeat; height: 104px;width: 153px;margin-left: -5%;text-align: center;font-size: 30px;padding-top: 36px;color: white;"id="loading_number">
            0%
        </div>
        <div style="background: url('image/loading/loading...gif') left no-repeat;height: 23px;width: 151px;margin: -30% auto auto auto" ></div>
    </div>
</div>
</body>
<script type="text/javascript">

    /**
     * loading 动画界面
     */
    var loading_per = -90;
    var loading_number = -5;
    var intervalNum = 0;
    var speedTime = 30;
    var isLoading = false;
    var loading_per_obj = $("#loading_per");
    var loading_number_obj = $("#loading_number");
    var number = 0;
    var speedInterval = 1;
    var loadingInterval = setInterval(function () {
        if(!isLoading){
            if (intervalNum>=20&&intervalNum<=30||intervalNum>=70&&intervalNum<=90){
                intervalNum++;
                return;
            }
        }else{
            speedInterval+=5;
        }
        $(loading_per_obj).css("marginLeft",loading_per+"%");
        $(loading_number_obj).css("marginLeft",loading_number+"%");
        number = parseInt(100-loading_per/-90 * 100);
        if (isLoading){
            if (number>=99){
                clearInterval(loadingInterval);
                $("#indexHtml").css("opacity","1");
                $(".loading").hide();
                return;
            }
        }
        if (!isLoading&&number>=92){
        }else {
            $(loading_number_obj).html(number+"%");
            loading_per +=speedInterval;
            loading_number +=speedInterval;
        }
        intervalNum++;
    },speedTime);

</script>
</html>